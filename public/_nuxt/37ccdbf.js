(window.webpackJsonp=window.webpackJsonp||[]).push([[46,7],{377:function(t,e,r){var n=r(6);t.exports=n(1..valueOf)},518:function(t,e,r){"use strict";r.r(e);var n={name:"ArrowIcon",props:{direction:{type:String,default:"left"},size:{type:String,default:"22"}},methods:{rotate:function(t){return"left"==t?"rotate(0deg)":"right"==t?"rotate(180deg)":"up"==t?"rotate(90deg)":"down"==t?"rotate(270deg)":void 0}}},o=r(34),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M10.25 20L1.25 11L10.25 2M2.5 11H20.75",stroke:"#333333","stroke-width":"2.25","stroke-linecap":"round","stroke-linejoin":"round"}})])}),[],!1,null,null,null);e.default=component.exports},519:function(t,e,r){"use strict";var n=r(2),o=r(6),c=r(56),d=r(39),l=r(49),f=r(250),v=r(17),h=r(3),m=r(249),w=r(160),y=r(520),x=r(521),k=r(102),_=r(522),O=[],C=o(O.sort),j=o(O.push),D=h((function(){O.sort(void 0)})),A=h((function(){O.sort(null)})),F=w("sort"),P=!h((function(){if(k)return k<70;if(!(y&&y>3)){if(x)return!0;if(_)return _<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)O.push({k:t+r,v:e})}for(O.sort((function(a,b){return b.v-a.v})),r=0;r<O.length;r++)t=O[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:D||!A||!F||!P},{sort:function(t){void 0!==t&&c(t);var e=d(this);if(P)return void 0===t?C(e):C(e,t);var r,n,o=[],h=l(e);for(n=0;n<h;n++)n in e&&j(o,e[n]);for(m(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:v(e)>v(r)?1:-1}}(t)),r=l(o),n=0;n<r;)e[n]=o[n++];for(;n<h;)f(e,n++);return e}})},520:function(t,e,r){var n=r(76).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},521:function(t,e,r){var n=r(76);t.exports=/MSIE|Trident/.test(n)},522:function(t,e,r){var n=r(76).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},547:function(t,e){},548:function(t,e){},549:function(t,e){},551:function(t,e,r){var content=r(597);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(98).default)("fc0ee2da",content,!0,{sourceMap:!1})},596:function(t,e,r){"use strict";r(551)},597:function(t,e,r){var n=r(97)((function(i){return i[1]}));n.push([t.i,'.bubbly-button[data-v-7a661b82]{font-family:"Helvetica","Arial",sans-serif;display:inline-block;font-size:1em;padding:1em 2em;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#c63;color:#fff;border-radius:4px;border:none;cursor:pointer;position:relative;transition:transform .1s ease-in,box-shadow .25s ease-in;box-shadow:0 2px 25px rgba(255,0,130,.5)}.bubbly-button[data-v-7a661b82]:focus{outline:0}.bubbly-button[data-v-7a661b82]:after,.bubbly-button[data-v-7a661b82]:before{position:absolute;content:"";display:block;width:140%;height:100%;left:-20%;z-index:-1000;transition:all .5s ease-in-out;background-repeat:no-repeat}.bubbly-button[data-v-7a661b82]:before{display:none;top:-75%;background-image:radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,transparent 20%,#c63 0,transparent 30%),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,transparent 10%,#c63 15%,transparent 20%),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%}.bubbly-button[data-v-7a661b82]:after{display:none;bottom:-75%;background-image:radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,transparent 10%,#c63 15%,transparent 20%),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0),radial-gradient(circle,#c63 20%,transparent 0);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%}.bubbly-button[data-v-7a661b82]:active{transform:scale(.9);background-color:darken(#c63,5%);box-shadow:0 2px 25px rgba(255,0,130,.2)}.animate[data-v-7a661b82]:before{display:block;animation:topBubbles-7a661b82 2s ease-in-out forwards}.animate[data-v-7a661b82]:after{display:block;animation:bottomBubbles-7a661b82 2s ease-in-out forwards}@keyframes topBubbles-7a661b82{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22% 50%,50% 50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes bottomBubbles-7a661b82{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}',""]),n.locals={},t.exports=n},636:function(t,e,r){"use strict";r.r(e);r(37),r(27),r(35),r(46),r(25),r(47);var n,o=r(11),c=r(18),d=r(153),l=(r(48),r(12),r(40),r(41),r(77),r(519),r(55),r(546),r(28)),f=r(560),v=r(159);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={name:"DetailFace",data:function(){return{isNotNotDetected:!1,readyAbasen:!1,isProcess:!0,faceReady:0,dataFace:[],detectorScores:[],custom:{videoHeight:400,videoWidth:550}}},computed:{isDetail:function(){return"true"===this.$route.query.detail},userId:function(){return this.$route.query.userId||null}},watch:{dataFace:function(t){var e=this.findDuplicates(t);this.detectorScores=Object(d.a)(e),this.faceReady=this.detectorScores.length,this.detectorScores.length>=3&&this.stopedInterval()}},methods:m(m({},Object(l.b)("loading",["showLoading","hideLoading"])),{},{loadModuls:function(){var t=this,e=window.location.origin+"/models";Promise.all([f.g.tinyFaceDetector.loadFromUri(e),f.g.faceLandmark68Net.loadFromUri(e),f.g.faceRecognitionNet.loadFromUri(e),f.g.faceExpressionNet.loadFromUri(e),f.g.ssdMobilenetv1.loadFromUri(e)]).then(this.startVideo()),setTimeout((function(){t.checkingCameraAccess()}),500)},startVideo:function(){var t=this;navigator.getUserMedia({video:{}},(function(e){return t.$refs.videoref.srcObject=e}),(function(t){return t}))},stopedInterval:function(){clearInterval(n),console.log("jalan 1"),this.onAddface()},onAddface:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.showLoading(),e.prev=1,e.next=4,t.$axios((new v.a).postData({url:"face-user",data:{avatarUrl:"",detectorScores:t.detectorScores,user:t.userId}}));case 4:t.$router.push("/admin/student"),t.$toast.show("Success add face",{position:"top-center",type:"success",duration:5e3,theme:"bubble",singleton:!0}),setTimeout((function(){window.location.reload()}),2e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r=(new v.b).manageError(e.t0),t.$toast.show((null==r?void 0:r.error)||r.message,{position:"top-center",type:"error",duration:5e3,theme:"bubble",singleton:!0});case 13:return e.prev=13,t.hideLoading(),e.finish(13);case 16:console.log("jalan");case 17:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},getToastError:function(){this.$toast.show("Please allow camera access",{position:"top-center",type:"error",duration:5e3,theme:"bubble",singleton:!0})},checkingCameraAccess:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),t.getToastError(),t.$router.push("/");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))()},handleVideoOnPlay:function(){var t=this,e={width:this.custom.videoWidth,height:this.custom.videoHeight};n=setInterval(Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.isProcess=!1,t.$refs.canvasref.innerHTML=f.b(t.$refs.videoref),f.f(t.$refs.canvasref,e),r.next=5,f.c(t.$refs.videoref,new f.a).withFaceLandmarks().withFaceExpressions();case 5:n=r.sent,o=f.h(n,e),t.$refs.canvasref.getContext("2d").clearRect(0,0,t.custom.videoWidth,t.custom.videoHeight),f.e.drawDetections(t.$refs.canvasref,o),f.e.drawFaceLandmarks(t.$refs.canvasref,o),t.onCheckFace(n[0]),t.otherCondition(n);case 12:case"end":return r.stop()}}),r)}))),2e3)},findDuplicates:function(t){for(var e=t.slice().sort(),r=[],i=0;i<e.length-1;i++)e[i+1]===e[i]&&r.push(e[i]);return r||[]},onCheckFace:function(t){if(t){var e=t.detection._score.toFixed(2);this.dataFace.push(e)}},otherCondition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===t.length||1!==t.length?this.isNotNotDetected=!0:this.isNotNotDetected=!1},onReadyAbsen:function(t){t.target.classList.remove("animate"),t.target.classList.add("animate"),setTimeout((function(){t.target.classList.remove("animate")}),700),this.readyAbasen=!0,this.loadModuls()}})},y=w,x=(r(596),r(34)),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;return e("div",[t.isDetail?e("div",[e("h1",[t._v("Detail Studeent")])]):e("div",{staticClass:"flex justify-center relative"},[e("div",{staticClass:"absolute top-1 left-1 flex gap-3 items-center cursor-pointer",on:{click:function(e){return t.$router.go(-1)}}},[e("icons-arrow",{attrs:{size:"18"}}),t._v(" "),e("span",{staticClass:"font-bold text-2xl"},[t._v("Add Face Detector")])],1),t._v(" "),e("div",{staticClass:"absolute top-1 right-1"},[e("span",{staticClass:"font-bold text-xl"},[t._v("Available "+t._s(t.faceReady)+" / 3")])]),t._v(" "),e("div",{staticClass:"bg-white rounded-md p-3 flex relative justify-center flex-wrap mt-14",staticStyle:{"max-width":"800px",width:"100%","max-height":"550px"}},[e("div",{staticClass:"w-full text-center p-4 text-sm text-gray-400"},[t._v("\n        I guarantee this face entirely from that user\n      ")]),t._v(" "),t.readyAbasen?e("div",{staticClass:"relative w-100"},[t.isNotNotDetected?e("span",{staticClass:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-red-400 text-xl font-bold z-20"},[t._v("Face not detected!")]):t._e(),t._v(" "),e("canvas",{ref:"canvasref",staticClass:"absolute z-10"}),t._v(" "),e("video",{ref:"videoref",class:t.isNotNotDetected?"opacity-50":"",attrs:{autoplay:"",muted:"",height:t.custom.videoHeight,width:t.custom.videoWidth},domProps:{muted:!0},on:{play:t.handleVideoOnPlay}})]):e("div",{staticClass:"w-100"},[e("button",{staticClass:"bubbly-button",attrs:{type:"button"},on:{click:t.onReadyAbsen}},[t._v("\n          Scan Face Now\n        ")])]),t._v(" "),t.readyAbasen?e("div",{staticClass:"w-full text-center p-4 text-md font-bold"},[t.isProcess?e("span",{staticClass:"text-red-400"},[t._v("On Processing...")]):t._e(),t._v(" "),t.isNotNotDetected||t.isProcess?t._e():e("span",{staticClass:"text-green-400"},[t._v("In process of scanning. "),e("b",[t._v("Please wait")])]),t._v(" "),t.isNotNotDetected?e("span",{staticClass:"block text-center text-sm text-gray-500"},[t._v("Position your face to the camera")]):t._e()]):t._e()])])])}),[],!1,null,"7a661b82",null);e.default=component.exports;installComponents(component,{IconsArrow:r(518).default})}}]);